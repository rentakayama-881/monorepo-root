# ===========================================
# AIValid Backend Environment Variables
# ===========================================
# Copy this file to .env and fill in the values

# Server Configuration
# Bind address for the HTTP server.
# Best practice on a VPS behind Nginx: keep this on 127.0.0.1 so the app isn't directly reachable.
BIND_ADDR=127.0.0.1
PORT=8080
GIN_MODE=debug  # debug or release
# Trusted proxies for real client IP extraction (Gin default trusts ALL proxies - unsafe).
# Default recommended for VPS behind local Nginx: "127.0.0.1,::1"
# Set to "none" to disable forwarded IP handling (ClientIP will be the remote address).
TRUSTED_PROXIES=127.0.0.1,::1

# Enhanced Rate Limiting
# Empty value = use secure defaults from code.
RATE_LIMIT_REQUESTS_PER_MINUTE=
RATE_LIMIT_REQUESTS_PER_HOUR=
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=
RATE_LIMIT_AUTH_REQUESTS_PER_HOUR=
RATE_LIMIT_SEARCH_REQUESTS_PER_MINUTE=
RATE_LIMIT_ENABLE_IP_LIMIT=true
RATE_LIMIT_ENABLE_USER_LIMIT=true
# Comma-separated IP or CIDR lists (e.g. 10.0.0.5,10.0.0.0/24,2001:db8::/32)
RATE_LIMIT_WHITELIST_IPS=
RATE_LIMIT_BLACKLIST_IPS=

# Database (PostgreSQL)
DATABASE_URL=postgresql://user:password@localhost:5432/aivalid?sslmode=disable

# JWT Configuration
JWT_SECRET=your-super-secret-key-at-least-32-characters
JWT_ISSUER=api.aivalid.id
JWT_AUDIENCE=aivalid-clients
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=168h

# TOTP (2FA) Configuration
TOTP_ISSUER=AIValid

# Email (SMTP) Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@example.com
SMTP_PASS=your-smtp-password
SMTP_FROM=AIValid <noreply@example.com>

# Resend Configuration (Modern Email API - Recommended)
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxx
RESEND_FROM_EMAIL=noreply@yourdomain.com
RESEND_FROM_NAME=AIValid

# Frontend URL (for email links)
FRONTEND_URL=http://localhost:3000

# Feature Service URL (for cross-service calls)
FEATURE_SERVICE_URL=http://localhost:5000
SERVICE_TOKEN=dev-service-token

# LZT Market API integration (keep token secret in backend only)
# Docs suggest timeout >= 300 seconds and delay >= 200ms between requests.
LZT_MARKET_BASE_URL=https://prod-api.lzt.market
LZT_MARKET_TOKEN=
LZT_MARKET_TIMEOUT_SECONDS=300
LZT_MARKET_MIN_INTERVAL_MS=200
LZT_MARKET_INSECURE_SKIP_VERIFY=false

# Optional: Admin seed (first run only)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=
