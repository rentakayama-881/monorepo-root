---
name: skill-master
description: Discover codebase patterns and generate or update SKILL files under .openai/skills. Use when analyzing projects for missing skills, creating skills from detected architecture patterns, or syncing skills with project structure changes.
---

# Skill Master

## Overview

Analyze a codebase to discover patterns and generate or update SKILL files in `.openai/skills/`. Support multi-platform projects with stack-specific pattern detection.

Capabilities:
- Scan codebase for architectural patterns (ViewModel, Repository, Room, etc.)
- Compare detected patterns with existing skills
- Auto-generate SKILL files with code-backed examples
- Track skill updates with source markers

## Triggering

Trigger this skill when the user asks to:
- Analyze a project for missing skills
- Generate skills from codebase patterns
- Sync or refresh existing skills after project changes
- Run “skill discovery”, “generate skills”, or “skill sync” workflows

Detection signals:
- `.openai/skills/` directory exists or needs to be created
- Project structure contains known pattern indicators
- Build or config files match a supported platform reference

## Modes

### Discover Mode

Analyze the codebase and report missing skills.

Steps:
1. Detect platform using build or config files (see references)
2. Scan source roots for pattern indicators
3. Compare detected patterns with existing `.openai/skills/`
4. Output a gap analysis report

Output format:

```text
Detected Patterns: {count}
| Pattern | Files Found | Example Location |
|---------|-------------|------------------|
| {name}  | {count}     | {path}           |

Existing Skills: {count}
Missing Skills: {count}
- {skill-name}: {pattern}, {file-count} files found
```

### Generate Mode

Create SKILL files from detected patterns.

Steps:
1. Run discovery to identify missing skills
2. For each missing skill:
   - Find 2 to 3 representative source files
   - Extract imports, annotations, class structure, and conventions
   - Extract rules from `.ruler/*.md` if present
3. Generate `SKILL.md` from the template structure
4. Add version and source marker

Generated SKILL structure:

```yaml
---
name: {pattern-name}
description: {generated description with trigger keywords}
---

# {Title}

## Overview
{Brief description from pattern analysis}

## File Structure
{Extracted from codebase}

## Implementation Pattern
{Code-backed examples, anonymized for business details}

## Rules
### Do
{From .ruler/*.md and codebase conventions}

### Don't
{Anti-patterns found}

## File Location
{Actual paths from codebase}
```

## Create Strategy

When target SKILL file does not exist:
1. Generate a new file using the template
2. Set internal generation version to `1.0.0` in marker metadata
3. Include all mandatory sections
4. Add source marker at file end

## Update Strategy

Marker check: look for `<!-- Generated by skill-master command` at file end.

If marker exists:
- Merge changes while preserving custom content
- Bump version in marker (major, minor, patch)
- Refresh source list in marker

If marker does not exist:
- Backup `SKILL.md` to `SKILL.md.bak`
- Use backup as source context
- Generate fresh file with marker
- Set marker version to `1.0.0`

## Marker Format

Place at end of generated `SKILL.md`:

```html
<!-- Generated by skill-master command
Version: {version}
Sources:
- path/to/source1.kt
- path/to/source2.md
- .ruler/rule-file.md
Last updated: {YYYY-MM-DD}
-->
```

## Platform References

Read the relevant reference for each detected platform:

| Platform | Detection Files | Reference |
|----------|-----------------|-----------|
| Android/Gradle | `build.gradle`, `settings.gradle` | `references/android.md` |
| iOS/Xcode | `*.xcodeproj`, `Package.swift` | `references/ios.md` |
| React (web) | `package.json` + react | `references/react-web.md` |
| React Native | `package.json` + react-native | `references/react-native.md` |
| Flutter/Dart | `pubspec.yaml` | `references/flutter.md` |
| Node.js | `package.json` | `references/node.md` |
| Python | `pyproject.toml`, `requirements.txt` | `references/python.md` |
| Java/JVM | `pom.xml`, `build.gradle` | `references/java.md` |
| .NET/C# | `*.csproj`, `*.sln` | `references/dotnet.md` |
| Go | `go.mod` | `references/go.md` |
| Rust | `Cargo.toml` | `references/rust.md` |
| PHP | `composer.json` | `references/php.md` |
| Ruby | `Gemfile` | `references/ruby.md` |
| Elixir | `mix.exs` | `references/elixir.md` |
| C/C++ | `CMakeLists.txt`, `Makefile` | `references/cpp.md` |
| Unknown | none | `references/generic.md` |

If multiple platforms are detected, load multiple references.

## Rules

### Do
- Extract only patterns that are verifiably present in code
- Use real code examples and anonymize business logic
- Include trigger keywords in generated descriptions
- Keep generated `SKILL.md` under 500 lines
- Put deep details in `references/` and keep `SKILL.md` lean
- Preserve custom sections on update
- Always backup before first modification

### Don't
- Include secrets, tokens, credentials, or PII
- Include business-sensitive implementation details
- Generate placeholder-only content without code evidence
- Overwrite custom user sections without backup
- Create deep reference chains (max one level from `SKILL.md`)
- Write outside `.openai/skills/`

## Content Extraction Rules

From codebase:
- Extract class structure, annotations, import patterns, naming conventions, and file locations
- Exclude hardcoded secrets, API keys, credentials, and PII

From `.ruler/*.md` (if present):
- Extract Do and Don’t rules
- Extract architecture and dependency constraints

## Output Report

After generation, print:

```text
SKILL GENERATION REPORT

Skills Generated: {count}

{skill-name} [CREATED | UPDATED | BACKED_UP+CREATED]
├── Analyzed: {file-count} source files
├── Sources: {list of source files}
├── Rules from: {.ruler files if any}
└── Output: .openai/skills/{skill-name}/SKILL.md ({line-count} lines)

Validation:
✓ YAML frontmatter valid
✓ Description includes trigger keywords
✓ Content under 500 lines
✓ Has required sections
```

## Safety Constraints

- Never write outside `.openai/skills/`
- Never delete content without backup
- Always backup before first-time modification
- Preserve user customizations during updates
- Keep behavior deterministic for identical inputs
